<%- include('partials/header'); -%>
<h1>COMPOSE</h1>
<form action="/compose" method="POST">
    <div class="form-group">
        <label>Title</label>
        <input class="form-control" type="text" name="postTitle">
        <label>Post</label>
        <textarea class="form-control" name="postBody" cols="45" rows="5"></textarea>
        <input type="file" name="inpFile"  id="inpFile" name="thephoto">
        <div class="image-preview" id="imagePreview" >
            <img src="" alt="Image Preview" class="image-preview__image" >
            <span class="image-preview__default-text">Image Preview</span>
        </div>


    </div>
    <button class="btn btn-primary" type="submit">publish</button>
</form>
<script>
    const inpFile = document.getElementById("inpFile");
    const previewContainer = document.getElementById("imagePreview");
    const previewImage = previewContainer.querySelector(".image-preview__image");
    const previewDefaultText = previewContainer.querySelector(".image-preview__default-text");


    inpFile.addEventListener("change", function () {
        const file = this.files[0];

        if (file) {
            const reader = new FileReader();

            previewDefaultText.style.display = "none";
            previewImage.style.display = "block";

            reader.addEventListener("load", function () {
                previewImage.setAttribute("src", this.result);

            });

            reader.readAsDataURL(file);

        } else {
            previewDefaultText.style.display = null;
            previewImage.style.display = null;
            previewImage.setAttribute("src", "");
        }

    })

</script>
<%- include('partials/footer.ejs'); -%>